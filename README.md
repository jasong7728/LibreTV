# LibreTV v2 - 单页面应用版本

## 🎉 重大升级

LibreTV v2 是基于原版重构的单页面应用（SPA）版本，提供了更现代化的用户体验和增强的功能。

## ✨ 主要改进

### 🔄 单页面应用架构
- **侧边栏导航**: 取消原有的顶部导航，改为侧边栏设计
- **无缝切换**: 所有功能都在同一页面，无需页面跳转
- **流畅动画**: 视图切换带有平滑的动画效果

### 🎬 播放体验优化
- **直接播放**: 选集或历史记录点击后直接在播放界面播放
- **自动暂停**: 离开播放界面时自动暂停视频
- **进度保存**: 自动保存播放进度，支持断点续播

### 🌟 豆瓣热门增强
- **独立界面**: 豆瓣热门现在有独立的界面
- **懒加载**: 支持分批加载，提高性能
- **加载更多**: 点击按钮加载更多内容
- **预加载**: 默认预加载20个项目

### 📱 移动端优化
- **响应式设计**: 完全适配移动设备
- **触摸友好**: 优化移动端操作体验
- **自适应布局**: 根据屏幕尺寸调整界面

## 🚀 功能特性

### 界面布局
- **搜索界面**: 视频搜索和结果展示
- **豆瓣热门**: 电影电视剧推荐，支持分类和标签
- **播放器**: 集成播放器，支持多集切换
- **历史记录**: 观看历史管理
- **设置**: 数据源配置和个性化设置
- **关于**: 版本信息和项目介绍

### 核心功能
- ✅ 多数据源搜索
- ✅ 自定义API支持
- ✅ 观看历史记录
- ✅ 播放进度保存
- ✅ 豆瓣热门推荐
- ✅ 密码保护
- ✅ 配置导入导出
- ✅ PWA支持

## 🛠️ 技术栈

- **前端**: HTML5 + CSS3 + JavaScript (ES6+)
- **样式**: Tailwind CSS + 自定义CSS
- **构建**: 无需构建，直接部署
- **兼容性**: 支持现代浏览器

## 📦 部署方式

### 本地开发
```bash
cd libretv-v2
python -m http.server 8081
```
访问 `http://localhost:8081`

### Vercel
1. 将 `libretv-v2` 目录作为根目录
2. 设置环境变量 `PASSWORD` (可选)
3. 部署即可

### Cloudflare Pages
1. 连接 Git 仓库
2. 设置构建输出目录为 `libretv-v2`
3. 添加环境变量 `PASSWORD` (可选)

### Docker
```dockerfile
FROM nginx:alpine
COPY libretv-v2/ /usr/share/nginx/html/
EXPOSE 80
```

## 🔧 配置说明

### 环境变量
- `PASSWORD`: 设置访问密码（可选）
- `ADMINPASSWORD`: 设置管理员密码（可选）

### 本地存储
- `selectedAPIs`: 选中的数据源
- `customAPIs`: 自定义API列表
- `viewingHistory`: 观看历史
- `doubanEnabled`: 豆瓣功能开关
- `autoplayEnabled`: 自动播放设置

## 🆚 与v1版本对比

| 特性 | v1 | v2 |
|------|----|----|
| 架构 | 多页面 | 单页面应用 |
| 导航 | 顶部导航栏 | 侧边栏 |
| 页面跳转 | 需要跳转 | 无缝切换 |
| 播放体验 | 新窗口播放 | 内嵌播放器 |
| 豆瓣热门 | 开关控制 | 独立界面 |
| 懒加载 | 不支持 | 支持 |
| 移动端 | 基础适配 | 深度优化 |
| 页脚 | 显示 | 已移除 |

## 🔄 迁移指南

从v1升级到v2：
1. 配置会自动迁移（使用相同的localStorage键）
2. 观看历史完全兼容
3. 自定义API设置保持不变
4. 可以并行运行两个版本进行对比

## 🐛 已知问题

- [ ] 部分老旧浏览器可能不支持某些CSS特性
- [ ] 移动端Safari的视频播放可能需要用户手动开始
- [ ] 在部分网络环境下豆瓣API可能需要代理

## 🤝 贡献指南

欢迎提交问题报告和功能建议！

1. Fork 项目
2. 创建功能分支
3. 提交更改
4. 创建 Pull Request

## 📄 许可证

本项目采用 Apache 2.0 许可证。

## 🙏 致谢

感谢原版 LibreTV 项目的所有贡献者！
